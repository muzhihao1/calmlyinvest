# Tradier API è®¾ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

Tradier APIæä¾›ä¸“ä¸šçº§çš„æœŸæƒå¸‚åœºæ•°æ®ï¼ŒåŒ…æ‹¬å®æ—¶ä»·æ ¼å’ŒGreeksï¼ˆDelta, Gamma, Theta, Vegaï¼‰ã€‚

**å…è´¹Sandboxç¯å¢ƒ**:
- âœ… 15åˆ†é’Ÿå»¶è¿Ÿæ•°æ®
- âœ… å®Œæ•´çš„æœŸæƒä»·æ ¼å’ŒGreeks
- âœ… æ— é™APIè°ƒç”¨
- âœ… æ°¸ä¹…å…è´¹

**Productionç¯å¢ƒ**ï¼ˆå¯é€‰å‡çº§ï¼‰:
- âœ… å®æ—¶æ•°æ®
- ğŸ’° $10/æœˆèµ·

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿè®¾ç½®ï¼‰

### æ­¥éª¤1: æ³¨å†ŒTradierå¼€å‘è€…è´¦å·

1. è®¿é—®: **https://developer.tradier.com/user/sign_up**

2. å¡«å†™æ³¨å†Œä¿¡æ¯:
   - Emailåœ°å€
   - å¯†ç 
   - å‹¾é€‰åŒæ„æ¡æ¬¾

3. ç‚¹å‡» **"Sign up"**

4. **æ£€æŸ¥é‚®ç®±** - ç‚¹å‡»éªŒè¯é“¾æ¥æ¿€æ´»è´¦å·

### æ­¥éª¤2: åˆ›å»ºSandboxè´¦å·

æ³¨å†ŒæˆåŠŸåä¼šè‡ªåŠ¨ç™»å½•ï¼Œç³»ç»Ÿä¼šæç¤ºåˆ›å»ºSandboxè´¦å·ï¼š

1. ç‚¹å‡» **"Create Sandbox Account"**
2. ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæµ‹è¯•è´¦å·
3. è®°ä½æ‚¨çš„ **Sandbox Account Number**ï¼ˆç±»ä¼¼: `12345678`ï¼‰

### æ­¥éª¤3: è·å–API Token

1. ç™»å½•åï¼Œç‚¹å‡»å·¦ä¾§èœå• **"API Access"**

2. åœ¨ **"Sandbox Access Token"** éƒ¨åˆ†ï¼š
   - æ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ª **Access Token**ï¼ˆç±»ä¼¼: `abc123xyz456...`ï¼‰
   - è¿™å°±æ˜¯æ‚¨çš„ **TRADIER_API_KEY**ï¼

3. **å¤åˆ¶è¿™ä¸ªToken** ğŸ“‹

### æ­¥éª¤4: é…ç½®ç¯å¢ƒå˜é‡

æ‰“å¼€é¡¹ç›®çš„ `.env` æ–‡ä»¶ï¼Œæ‰¾åˆ°Tradieré…ç½®éƒ¨åˆ†ï¼š

```bash
# Tradier API Configuration
TRADIER_API_KEY=ç²˜è´´æ‚¨çš„Tokenåˆ°è¿™é‡Œ
TRADIER_SANDBOX=true
```

**ç¤ºä¾‹**:
```bash
TRADIER_API_KEY=abc123xyz456def789ghi012jkl345mno678pqr901stu234vwx567
TRADIER_SANDBOX=true
```

### æ­¥éª¤5: é‡å¯å¼€å‘æœåŠ¡å™¨

```bash
cd calmlyinvest
npm run dev
```

### æ­¥éª¤6: æµ‹è¯•æœŸæƒæ•°æ®æ›´æ–°

1. è®¿é—® http://localhost:5000
2. ç™»å½•åº”ç”¨
3. è¿›å…¥ä»ªè¡¨æ¿
4. ç‚¹å‡» **"åˆ·æ–°æ•°æ®"** æŒ‰é’®
5. æŸ¥çœ‹æœŸæƒè¡¨æ ¼ - ä»·æ ¼å’ŒDeltaåº”è¯¥ä¼šæ›´æ–°ï¼

---

## ğŸ” éªŒè¯APIæ˜¯å¦å·¥ä½œ

### æ–¹æ³•1: æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

åœ¨ç»ˆç«¯ä¸­ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—ï¼š

```
ğŸ“Š Tradier Provider initialized: SANDBOX (15-min delay)
ğŸ“¡ Fetching option price for QQQ250718P00440000...
âœ… Got price for QQQ 250718P440: $2.07
ğŸ“Š Fetching Greeks for QQQ250718P00440000...
âœ… Got Greeks for QQQ 250718P440: delta=-0.403, gamma=0.012...
```

### æ–¹æ³•2: æ£€æŸ¥æœŸæƒæ•°æ®

æœŸæƒè¡¨æ ¼ä¸­åº”è¯¥æ˜¾ç¤ºï¼š
- âœ… å‡†ç¡®çš„å½“å‰ä»·æ ¼ï¼ˆè€Œä¸æ˜¯ä¼°ç®—å€¼ï¼‰
- âœ… æ›´æ–°çš„Deltaå€¼
- âœ… ç»¿è‰²/çº¢è‰²çš„æ¶¨è·Œæ˜¾ç¤º

### å¦‚æœå‡ºç°é”™è¯¯

**é”™è¯¯: `âš ï¸ Tradier API not configured`**
- è§£å†³: æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `TRADIER_API_KEY` æ˜¯å¦å·²å¡«å†™

**é”™è¯¯: `Tradier API authentication failed`**
- è§£å†³: API Tokenå¯èƒ½ä¸æ­£ç¡®ï¼Œé‡æ–°ä»Tradierç½‘ç«™å¤åˆ¶

**é”™è¯¯: `Cannot convert option symbol`**
- è§£å†³: æœŸæƒä»£ç æ ¼å¼å¯èƒ½ä¸æ­£ç¡®ï¼Œåº”è¯¥æ˜¯: `QQQ 250718P440`

---

## ğŸ“Š APIä½¿ç”¨æƒ…å†µç›‘æ§

### æŸ¥çœ‹APIè°ƒç”¨æ¬¡æ•°

1. ç™»å½• https://developer.tradier.com
2. ç‚¹å‡» **"Dashboard"**
3. æŸ¥çœ‹ **"API Usage"** å›¾è¡¨

**Sandboxç¯å¢ƒæ²¡æœ‰é€Ÿç‡é™åˆ¶**ï¼Œæ‚¨å¯ä»¥éšæ„æµ‹è¯•ï¼

---

## ğŸ’° å‡çº§åˆ°å®æ—¶æ•°æ®ï¼ˆå¯é€‰ï¼‰

### ä½•æ—¶éœ€è¦å‡çº§ï¼Ÿ

- âœ… å¦‚æœ15åˆ†é’Ÿå»¶è¿Ÿå¯¹æ‚¨æ¥è¯´å¯ä»¥æ¥å— â†’ **ä¿æŒSandboxï¼ˆå…è´¹ï¼‰**
- â¬†ï¸ å¦‚æœéœ€è¦å®æ—¶æ•°æ®è¿›è¡Œæ—¥å†…äº¤æ˜“ â†’ **å‡çº§åˆ°Production**

### å‡çº§æ­¥éª¤

1. è®¿é—® **https://brokerage.tradier.com/signup**
2. å¼€ç«‹Tradierç»çºªè´¦æˆ·ï¼ˆéœ€è¦å…¥é‡‘ï¼‰
3. è·å–Production API Token
4. æ›´æ–° `.env` é…ç½®:
   ```bash
   TRADIER_API_KEY=your_production_token
   TRADIER_SANDBOX=false  # æ”¹ä¸ºfalse
   ```

**è´¹ç”¨**:
- Market Dataè®¢é˜…: $10/æœˆ
- æˆ–è€…: è´¦æˆ·ä½™é¢ > $500å¯å…è´¹è·å–å®æ—¶æ•°æ®

---

## ğŸ”§ APIé…ç½®é€‰é¡¹

### å®Œæ•´çš„ç¯å¢ƒå˜é‡é…ç½®

```bash
# Tradier APIé…ç½®
TRADIER_API_KEY=your_api_key_here        # å¿…å¡«
TRADIER_SANDBOX=true                      # true=å»¶è¿Ÿæ•°æ®, false=å®æ—¶æ•°æ®
```

### Verceléƒ¨ç½²é…ç½®

å¦‚æœæ‚¨åœ¨Vercelä¸Šéƒ¨ç½²ï¼Œéœ€è¦åœ¨Vercel Dashboardè®¾ç½®ç¯å¢ƒå˜é‡ï¼š

1. è¿›å…¥ **Vercelé¡¹ç›® â†’ Settings â†’ Environment Variables**
2. æ·»åŠ :
   - Name: `TRADIER_API_KEY`
   - Value: æ‚¨çš„API Token
   - Environment: é€‰æ‹© `Production`, `Preview`, `Development`
3. æ·»åŠ :
   - Name: `TRADIER_SANDBOX`
   - Value: `true`
   - Environment: åŒä¸Š
4. ç‚¹å‡» **"Save"**
5. **é‡æ–°éƒ¨ç½²**åº”ç”¨

---

## ğŸ“– APIæ–‡æ¡£

### Tradierå®˜æ–¹æ–‡æ¡£
- APIå‚è€ƒ: https://documentation.tradier.com/brokerage-api
- Option Quotes: https://documentation.tradier.com/brokerage-api/markets/get-quotes
- Greeksè®¡ç®—: https://documentation.tradier.com/brokerage-api/markets/get-option-greeks

### æˆ‘ä»¬ä½¿ç”¨çš„APIç«¯ç‚¹

**è·å–æœŸæƒæŠ¥ä»·**:
```
GET https://sandbox.tradier.com/v1/markets/quotes
  ?symbols=QQQ250718P00440000
  &greeks=true
```

**è¿”å›æ•°æ®ç¤ºä¾‹**:
```json
{
  "quotes": {
    "quote": {
      "symbol": "QQQ250718P00440000",
      "last": 2.07,
      "bid": 2.05,
      "ask": 2.09,
      "greeks": {
        "delta": -0.403,
        "gamma": 0.012,
        "theta": -0.045,
        "vega": 0.089
      }
    }
  }
}
```

---

## â“ å¸¸è§é—®é¢˜

### Q: Sandboxå’ŒProductionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

| ç‰¹æ€§ | Sandbox | Production |
|------|---------|------------|
| æ•°æ®å»¶è¿Ÿ | 15åˆ†é’Ÿ | å®æ—¶ |
| è´¹ç”¨ | å…è´¹ | $10/æœˆ |
| APIé™åˆ¶ | æ— é™åˆ¶ | 120 calls/åˆ†é’Ÿ |
| é€‚ç”¨åœºæ™¯ | å¼€å‘æµ‹è¯• | ç”Ÿäº§ç¯å¢ƒ |

### Q: å¦‚ä½•æŸ¥çœ‹æˆ‘çš„API Tokenï¼Ÿ

ç™»å½• https://developer.tradier.com â†’ ç‚¹å‡» **"API Access"** â†’ å¤åˆ¶Sandbox Access Token

### Q: æˆ‘å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªè´¦å·å—ï¼Ÿ

å¯ä»¥ã€‚ä½†é€šå¸¸ä¸€ä¸ªSandboxè´¦å·å°±å¤Ÿç”¨äº†ã€‚

### Q: æœŸæƒä»£ç æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ

ç³»ç»Ÿå†…éƒ¨æ ¼å¼: `QQQ 250718P440`
- `QQQ` = æ ‡çš„ä»£ç 
- `250718` = åˆ°æœŸæ—¥ (YYMMDD)
- `P` = æœŸæƒç±»å‹ (C=Call, P=Put)
- `440` = æ‰§è¡Œä»·

ç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢ä¸ºTradieræ ¼å¼: `QQQ250718P00440000`

### Q: APIè°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

1. æ£€æŸ¥API Tokenæ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
4. å¦‚æœæŒç»­å¤±è´¥ï¼Œç³»ç»Ÿä¼šå›é€€åˆ°ä¼°ç®—ä»·æ ¼ï¼ˆä½†ä¸æ›´æ–°Deltaï¼‰

### Q: 15åˆ†é’Ÿå»¶è¿Ÿå¤Ÿç”¨å—ï¼Ÿ

å¯¹äºå¤§å¤šæ•°ä¸ªäººæŠ•èµ„è€…å’Œé•¿æœŸæŒä»“æ¥è¯´ï¼Œ15åˆ†é’Ÿå»¶è¿Ÿå®Œå…¨å¤Ÿç”¨ã€‚åªæœ‰æ—¥å†…äº¤æ˜“è€…æ‰éœ€è¦å®æ—¶æ•°æ®ã€‚

---

## ğŸ“ æ”¯æŒ

### é‡åˆ°é—®é¢˜ï¼Ÿ

1. **æŸ¥çœ‹æ—¥å¿—**: æœåŠ¡å™¨ç»ˆç«¯ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
2. **æ£€æŸ¥é…ç½®**: ç¡®è®¤ `.env` æ–‡ä»¶ä¸­çš„é…ç½®æ­£ç¡®
3. **Tradieræ”¯æŒ**: support@tradier.com
4. **é¡¹ç›®Issues**: åœ¨GitHubé¡¹ç›®ä¸­æäº¤Issue

---

## âœ… è®¾ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] å·²æ³¨å†ŒTradierå¼€å‘è€…è´¦å·
- [ ] å·²åˆ›å»ºSandboxè´¦å·
- [ ] å·²è·å–API Access Token
- [ ] å·²åœ¨ `.env` ä¸­é…ç½® `TRADIER_API_KEY`
- [ ] å·²åœ¨ `.env` ä¸­è®¾ç½® `TRADIER_SANDBOX=true`
- [ ] å·²é‡å¯å¼€å‘æœåŠ¡å™¨
- [ ] æµ‹è¯•"åˆ·æ–°æ•°æ®"åŠŸèƒ½ - æœŸæƒä»·æ ¼æ­£ç¡®æ›´æ–°
- [ ] éªŒè¯Deltaå€¼æ­£ç¡®æ˜¾ç¤º
- [ ] ï¼ˆå¯é€‰ï¼‰åœ¨Vercelé…ç½®ç¯å¢ƒå˜é‡
- [ ] ï¼ˆå¯é€‰ï¼‰å‡çº§åˆ°Productionå®æ—¶æ•°æ®

---

**æ­å–œï¼ğŸ‰ æ‚¨çš„Tradier APIå·²æˆåŠŸé…ç½®ï¼**

ç°åœ¨æ‚¨çš„åº”ç”¨å¯ä»¥è·å–çœŸå®çš„æœŸæƒå¸‚åœºä»·æ ¼å’ŒGreeksæ•°æ®äº†ã€‚
