<!DOCTYPE html>
<html>
<head>
  <title>Test Supabase Key</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>Testing Supabase API Key</h1>
  <div id="result"></div>

  <script>
    const SUPABASE_URL = 'https://hsfthqchyupkbmazcuis.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhzZnRocWNoeXVwa2JtYXpjdWlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5NDcxMzQsImV4cCI6MjA2OTUyMzEzNH0.lgEh9aI69XXxSB_V1QpXLyNP-CCXFfxTHhQMfN3bxF0';

    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function testAuth() {
      console.log('Testing Supabase authentication...');
      const resultDiv = document.getElementById('result');

      // Test login with user credentials
      const { data, error } = await supabase.auth.signInWithPassword({
        email: '279838958@qq.com',
        password: 'muzhihao12'
      });

      if (error) {
        console.error('❌ Authentication Failed:', error);
        resultDiv.innerHTML = `
          <h2 style="color: red;">❌ Authentication Failed</h2>
          <p><strong>Error:</strong> ${error.message}</p>
          <p><strong>Status:</strong> ${error.status}</p>
          <pre>${JSON.stringify(error, null, 2)}</pre>
        `;
      } else {
        console.log('✅ Authentication Succeeded:', data);
        resultDiv.innerHTML = `
          <h2 style="color: green;">✅ Authentication Succeeded!</h2>
          <p><strong>User ID:</strong> ${data.user.id}</p>
          <p><strong>Email:</strong> ${data.user.email}</p>
          <p><strong>API Key is Valid!</strong></p>
        `;
      }
    }

    testAuth();
  </script>
</body>
</html>
